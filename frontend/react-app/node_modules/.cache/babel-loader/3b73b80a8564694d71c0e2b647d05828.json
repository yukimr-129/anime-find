{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useRecoilState } from \"recoil\";\nimport { getReviewsList } from \"lib/api/review/review\";\nimport { AnimeReviewList } from \"store/AnimeReviewList\";\nimport { useMessage } from \"./message/useMessage\";\nexport const useGetAnimeReviews = id => {\n  _s();\n\n  const [reviewsList, setReviewsList] = useRecoilState(AnimeReviewList);\n  const [loadFlag, setLoadFlag] = useState(false);\n  const [listCount, setListCount] = useState(0);\n  const {\n    showMessage\n  } = useMessage();\n  useEffect(() => {\n    let isMounted = true;\n\n    const getReviews = async id => {\n      try {\n        const res = await getReviewsList(id);\n\n        if (res.status === 200) {\n          const reviewsData = res.data;\n          setReviewsList(reviewsData);\n          setListCount(reviewsData.length);\n          setLoadFlag(true);\n        } else {\n          console.error('status error');\n        }\n      } catch (error) {\n        showMessage({\n          title: 'アニメ一覧の取得に失敗しました',\n          status: \"error\"\n        });\n      }\n    };\n\n    isMounted && getReviews(id);\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n  return {\n    reviewsList,\n    listCount,\n    loadFlag\n  };\n};\n\n_s(useGetAnimeReviews, \"SAwxbbFkmqcGkdbFHeQdtoAkuLg=\", false, function () {\n  return [useRecoilState, useMessage];\n});","map":{"version":3,"sources":["/usr/src/app/react-app/src/customHooks/useGetAnimeReviews.ts"],"names":["useEffect","useState","useRecoilState","getReviewsList","AnimeReviewList","useMessage","useGetAnimeReviews","id","reviewsList","setReviewsList","loadFlag","setLoadFlag","listCount","setListCount","showMessage","isMounted","getReviews","res","status","reviewsData","data","length","console","error","title"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,cAAT,QAA+B,QAA/B;AAEA,SAASC,cAAT,QAA+B,uBAA/B;AACA,SAASC,eAAT,QAAgC,uBAAhC;AACA,SAASC,UAAT,QAA2B,sBAA3B;AAOA,OAAO,MAAMC,kBAAkB,GAAIC,EAAD,IAAgB;AAAA;;AAC9C,QAAM,CAAEC,WAAF,EAAeC,cAAf,IAAkCP,cAAc,CAACE,eAAD,CAAtD;AACA,QAAM,CAAEM,QAAF,EAAYC,WAAZ,IAA4BV,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAEW,SAAF,EAAaC,YAAb,IAA6BZ,QAAQ,CAAC,CAAD,CAA3C;AACA,QAAM;AAAEa,IAAAA;AAAF,MAAkBT,UAAU,EAAlC;AAGAL,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIe,SAAS,GAAG,IAAhB;;AACA,UAAMC,UAAU,GAAG,MAAMT,EAAN,IAAqB;AACpC,UAAI;AACA,cAAMU,GAAG,GAAG,MAAMd,cAAc,CAACI,EAAD,CAAhC;;AACA,YAAIU,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACpB,gBAAMC,WAA+B,GAAGF,GAAG,CAACG,IAA5C;AACAX,UAAAA,cAAc,CAACU,WAAD,CAAd;AACAN,UAAAA,YAAY,CAACM,WAAW,CAACE,MAAb,CAAZ;AACAV,UAAAA,WAAW,CAAC,IAAD,CAAX;AACH,SALD,MAKO;AACHW,UAAAA,OAAO,CAACC,KAAR,CAAc,cAAd;AACH;AACJ,OAVD,CAUE,OAAOA,KAAP,EAAc;AACZT,QAAAA,WAAW,CAAC;AAACU,UAAAA,KAAK,EAAE,iBAAR;AAA2BN,UAAAA,MAAM,EAAE;AAAnC,SAAD,CAAX;AACH;AACJ,KAdD;;AAgBAH,IAAAA,SAAS,IAAIC,UAAU,CAACT,EAAD,CAAvB;AAEA,WAAO,MAAM;AAAEQ,MAAAA,SAAS,GAAG,KAAZ;AAAmB,KAAlC;AACH,GArBQ,EAqBN,EArBM,CAAT;AAuBA,SAAO;AAAEP,IAAAA,WAAF;AAAeI,IAAAA,SAAf;AAA0BF,IAAAA;AAA1B,GAAP;AACH,CA/BM;;GAAMJ,kB;UAC+BJ,c,EAGhBG,U","sourcesContent":["import { useEffect, useState } from \"react\"\nimport { useRecoilState } from \"recoil\"\n\nimport { getReviewsList } from \"lib/api/review/review\"\nimport { AnimeReviewList } from \"store/AnimeReviewList\"\nimport { useMessage } from \"./message/useMessage\"\nimport { AnimeReviewType } from \"types/review/AnimeReviewType\"\n\ntype AnimeApiSearch = () => {\n    reviewsList: AnimeReviewType[];\n}\n\nexport const useGetAnimeReviews = (id: string) => {\n    const [ reviewsList, setReviewsList ] = useRecoilState(AnimeReviewList)\n    const [ loadFlag, setLoadFlag ] = useState(false)\n    const [ listCount, setListCount] = useState(0);\n    const { showMessage } = useMessage()\n\n    \n    useEffect(() => {\n        let isMounted = true\n        const getReviews = async(id: string) => {\n            try {\n                const res = await getReviewsList(id)\n                if (res.status === 200) {\n                    const reviewsData : AnimeReviewType[] = res.data\n                    setReviewsList(reviewsData)\n                    setListCount(reviewsData.length)\n                    setLoadFlag(true)\n                } else {\n                    console.error('status error')\n                }            \n            } catch (error) {\n                showMessage({title: 'アニメ一覧の取得に失敗しました', status: \"error\"})\n            }\n        }\n\n        isMounted && getReviews(id)\n\n        return () => { isMounted = false }\n    }, [])\n\n    return { reviewsList, listCount, loadFlag }\n}"]},"metadata":{},"sourceType":"module"}