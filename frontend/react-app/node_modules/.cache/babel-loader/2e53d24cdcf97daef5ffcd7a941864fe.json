{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from 'react';\nimport { getReviewCount } from 'lib/api/review/review';\nimport { useRecoilValue } from 'recoil';\nimport { ReviewReflection } from 'store/ReviewReflection';\nexport const useGetReviewCount = id => {\n  _s();\n\n  const [count, setCount] = useState(0);\n  const [rate, setRate] = useState(0);\n  const reviewReflection = useRecoilValue(ReviewReflection);\n  const getReviewStatus = useCallback(async () => {\n    try {\n      const reviewCount = await getReviewCount(id);\n      const {\n        review_count,\n        average_rate\n      } = reviewCount.data;\n      review_count && setCount(review_count);\n      average_rate && setRate(average_rate);\n    } catch (error) {\n      console.error(error);\n    }\n  }, [reviewReflection]);\n  useEffect(() => {\n    let isMounted = true;\n    isMounted && getReviewStatus();\n    return () => {\n      isMounted = false;\n    };\n  }, [reviewReflection]);\n  return {\n    count,\n    rate\n  };\n};\n\n_s(useGetReviewCount, \"h3q0cHSmPtKZ/PlKgTXIXJGlZnI=\", false, function () {\n  return [useRecoilValue];\n});","map":{"version":3,"sources":["/usr/src/app/react-app/src/customHooks/useGetReviewCount.ts"],"names":["useCallback","useEffect","useState","getReviewCount","useRecoilValue","ReviewReflection","useGetReviewCount","id","count","setCount","rate","setRate","reviewReflection","getReviewStatus","reviewCount","review_count","average_rate","data","error","console","isMounted"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AAEA,SAASC,cAAT,QAA+B,uBAA/B;AACA,SAASC,cAAT,QAA+B,QAA/B;AACA,SAASC,gBAAT,QAAiC,wBAAjC;AAOA,OAAO,MAAMC,iBAA8B,GAAIC,EAAD,IAAgB;AAAA;;AAC1D,QAAM,CAAEC,KAAF,EAASC,QAAT,IAAsBP,QAAQ,CAAC,CAAD,CAApC;AACA,QAAM,CAAEQ,IAAF,EAAQC,OAAR,IAAoBT,QAAQ,CAAC,CAAD,CAAlC;AACA,QAAMU,gBAAgB,GAAGR,cAAc,CAACC,gBAAD,CAAvC;AAEA,QAAMQ,eAAe,GAAGb,WAAW,CAAC,YAAW;AAC3C,QAAI;AACA,YAAMc,WAAW,GAAG,MAAMX,cAAc,CAACI,EAAD,CAAxC;AACA,YAAM;AAAEQ,QAAAA,YAAF;AAAgBC,QAAAA;AAAhB,UAAiCF,WAAW,CAACG,IAAnD;AAEAF,MAAAA,YAAY,IAAIN,QAAQ,CAACM,YAAD,CAAxB;AACAC,MAAAA,YAAY,IAAIL,OAAO,CAACK,YAAD,CAAvB;AAEH,KAPD,CAOE,OAAOE,KAAP,EAAc;AACZC,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACH;AACJ,GAXkC,EAWhC,CAACN,gBAAD,CAXgC,CAAnC;AAaAX,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAImB,SAAS,GAAG,IAAhB;AACAA,IAAAA,SAAS,IAAIP,eAAe,EAA5B;AACA,WAAO,MAAM;AACTO,MAAAA,SAAS,GAAG,KAAZ;AACH,KAFD;AAGH,GANQ,EAMN,CAACR,gBAAD,CANM,CAAT;AAQA,SAAO;AAAEJ,IAAAA,KAAF;AAASE,IAAAA;AAAT,GAAP;AACH,CA3BM;;GAAMJ,iB;UAGgBF,c","sourcesContent":["import { useCallback, useEffect, useState } from 'react'\n\nimport { getReviewCount } from 'lib/api/review/review'\nimport { useRecoilValue } from 'recoil'\nimport { ReviewReflection } from 'store/ReviewReflection'\n\ntype ReviewCount = (id: number) => {\n    count: number;\n    rate: number;\n}\n\nexport const useGetReviewCount: ReviewCount = (id: number) => {\n    const [ count, setCount ] = useState(0)\n    const [ rate, setRate ] = useState(0)\n    const reviewReflection = useRecoilValue(ReviewReflection)\n\n    const getReviewStatus = useCallback(async() => {\n        try {\n            const reviewCount = await getReviewCount(id)\n            const { review_count, average_rate } = reviewCount.data\n\n            review_count && setCount(review_count)\n            average_rate && setRate(average_rate)\n            \n        } catch (error) {\n            console.error(error)\n        }\n    }, [reviewReflection])\n\n    useEffect(() => {\n        let isMounted = true\n        isMounted && getReviewStatus()\n        return () => {\n            isMounted = false\n        }\n    }, [reviewReflection])\n\n    return { count, rate }\n}"]},"metadata":{},"sourceType":"module"}